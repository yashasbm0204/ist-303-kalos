{% extends "base.html" %}
{% block title %}Budgets{% endblock %}
{% block content %}
<h2>Budgeting </h2>
<form method="post" class="row g-2">
  <div class="col-md-3"><input class="form-control" type="month" name="month" required></div>
  <div class="col-md-3">
    <select class="form-select" name="category_id">
      <option value="">All categories</option>
      {% for c in categories %}<option value="{{ c.id }}">{{ c.name }}</option>{% endfor %}
    </select>
  </div>
  <div class="col-md-3"><input class="form-control" type="number" step="0.01" name="amount" placeholder="Amount" required></div>
  <div class="col-md-3"><button class="btn btn-primary w-100">Save Budget</button></div>
</form>

<hr>
<h3>Budget List</h3>
<table class="table table-dark table-striped">
  <thead><tr><th>Month</th><th>Category</th><th>Amount</th></tr></thead>
  <tbody>
  {% for b in items %}
    <tr>
      <td>{{ b.month_key }}</td>
      <td>{{ b.category.name if b.category else 'All categories' }}</td>
      <td>${{ '%.2f'|format(b.amount) }}</td>
    </tr>
  {% else %}
    <tr><td colspan="3">No budgets yet.</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
